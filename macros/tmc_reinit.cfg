# TMC Re-Init
[gcode_macro TR]
gcode:
 TRO STEPPER=x
 TRO STEPPER=x1
 TRO STEPPER=x2
 TRO STEPPER=x3
 TRO STEPPER=y
 TRO STEPPER=y1
 TRO STEPPER=y2
 TRO STEPPER=y3
 TROD STEPPER=extruder

# TMC Re-Init One
[gcode_macro TRO]
gcode:
  RESPOND PREFIX="info" MSG=" TR > Re-Init > stepper_{params.STEPPER}"
  INIT_TMC STEPPER=stepper_{params.STEPPER}
  SET_TMC_FIELD STEPPER=stepper_{params.STEPPER} FIELD=uv_cp VALUE=1
  SET_TMC_FIELD STEPPER=stepper_{params.STEPPER} FIELD=reset VALUE=1

# TMC Re-Init One Direct
[gcode_macro TRDO]
gcode:
  RESPOND PREFIX="info" MSG=" TR > Re-Init TMC > {params.STEPPER}"
  INIT_TMC STEPPER={params.STEPPER}
  SET_TMC_FIELD STEPPER={params.STEPPER} FIELD=uv_cp VALUE=1
  SET_TMC_FIELD STEPPER={params.STEPPER} FIELD=reset VALUE=1

[delayed_gcode TR_STARTUP]
initial_duration: 1
gcode:
  RESPOND PREFIX="info" MSG=" TR > Fixing TMCs On Start-up..."
  TR
  RESPOND PREFIX="info" MSG=" TR > Done fixing!"
